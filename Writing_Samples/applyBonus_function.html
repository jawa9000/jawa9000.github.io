<!DOCTYPE html>
<html>
    <head>
        <title>applyBonus() Function</title>
        <link href="../css/bootstrap.css" rel="stylesheet">
        <link href="../css/tutorials.css" rel="stylesheet">
        <link rel="stylesheet" href="styles/main.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style>
            .indent1 {
            padding: 0 0 0 36px; }

            .indent2 {
            padding: 0 0 0 72px; }

            .indent3 {
            padding: 0 0 0 108px; }

            .indent4 {
            padding: 0 0 0 144px; }

            .indent5 {
            padding: 0 0 0 180px; }

            .indent6 {
            padding: 0 0 0 216px; }

            .indent7 {
            padding: 0 0 0 254px; }

            a {
                text-decoration: underline;
                color: blue;
            }
        </style>
    </head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <h1 id="top">applyBonus() Function</h1>
                <p>Written by Brian Immel on Jan 01, 2023</p>
                <div class="floatLeft">
                    <ul>
                        <li><a href="#top">applyBonus() Function</a></li>
                        <li><a href="#IWeatherProvider">IWeatherProvider</a></li>
                        <li><a href="#applyBonus_with_weather">applyBonus() with weather</a></li>
                        <li><a href="#applyBonus_Without_Weather">applyBonus() without weather</a></li>
                        <li><a href="#WeatherSatus_options">WeatherSatus options</a></li>
                        <li><a href="#Error_messages_and_help">Error messages and help</a></li>
                    </ul>
                </div>
                <p>The <code class="inline">applyBonus</code> function allows you to apply in-game bonuses. This function can accept real-world weather data that can be used to apply weather effects as an additional bonus. The function can interface with <a href="#IWeatherProvider">iWeatherProvider</a> which returns weather data. The <code class="inline">applyBonus</code> function can be used when an action has occurred during game play (e.g. attack, experience, etc.) and only accepts a float value (between 0 and 1).</p>
                <p>If this is your first time using location awareness features, visit our <a href="#">location developer documentation</a> and <a href="#">privacy notice</a>  to learn more about these features.</p>
            
                <h2 id="IWeatherProvider">IWeatherProvider</h2>
                <p><code class="inline">IWeatherProvider</code> returns a read-only enum describing the weather in the current location of the player that is approximately 5 square kilometers (well beyond the in-game viewport).</p>

                <code class="block">
                    interface IWeatherProvider {<br/>
                        <span class="indent1">WeatherStatus GetCurrentWeather(Location location);</span><br/>
                    }
                </code>

                <p><code class="inline">IWeatherProvider</code> returns the following enum types:</p>
                <ul>
                    <li>Unset</li>
                    <li>Clear</li>
                    <li>Rainy</li>
                    <li>Cloudy</li>
                    <li>ErrorNotFound</li>
                </ul>
                
                <p>The <code class="inline">applyBonus</code> function can be used <a href="#applyBonus_with_weather">with</a> or <a href="#applyBonus_Without_Weather">without</a> the data provided by <code class="inline">IWeatherProvider</code>.</p>
                
                <h2 id="applyBonus_with_weather">applyBonus() with weather</h2>
                <p>If you want to apply an additional weather-based bonus, the <code class="inline">applyBonus</code> function can accept two parameters: <code class="inline">percentGood</code> (float: 0 - 1) and <code class="inline">weatherProvider</code> (object).</p>
                
                <p>For example, if you choose to apply a “boosting” bonus based on clear weather in the player's current location, you could use the <code class="inline">applyBonus</code> function like this:</p>
                <code class="block">
                    Void applyBonus (float percentGood, IWeatherProvider weatherProvider) {<br/>
                    <span class="indent1">WeatherStatus status = weatherProvider.getCurrentWeather(getCurrentLocation());</span><br/>
                    <br/>
                    <span class="indent1">if (status == WeatherStatus.Clear) {</span><br/>
                    <span class="indent2">percentGood += 0.2f;</span><br/>
                    <span class="indent1">} else {</span><br/>
                    <span class="indent2">percentGood -= 0.2f;</span><br/>
                    <span class="indent1">}</span><br/>
                    <br/>
                    <span class="indent1">percentGood = Mathf.Clamp(percentGood, 0.0f, 1.0f);</span><br/>
                    <span class="indent1">IBonus bonus = getBonus(percentGood);</span><br/>
                    <br/>
                    <span class="indent1">displayBonus(bonus);</span><br/>
                    }    
                </code>
                
                <p>The <code class="inline">applyBonus</code> function accepts a floating point number (0-1) and an object provided by <a href="#IWeatherProvider"><code class="inline">IWeatherProvider</code></a> that then returns the weather condition (see <a href="#WeatherSatus_options">WeatherSatus options</a> below for types and suggestions). If the weather status is clear, a value of 0.2 is added to <code class="inline">percentGood</code>. Any other status applies a value of -0.2. The <code class="inline">percentGood</code> value is then limited between the values of 0 and 1 as the weather and action values may modify the value below or above that range. From there, the bonus is calculated using the <a href="#"><code class="inline">getBonus</code></a> function and displayed to the player via the <a href="#"><code class="inline">displayBonus</code></a> function.</p>

                <h2 id="applyBonus_Without_Weather">applyBonus() without weather</h2>
                <p>You can use the <code class="inline">applyBonus</code> function without location data (<a href="#applyBonus_with_weather">weather bonus</a>) by submitting one parameter: <code class="inline">percentGood</code> (float).</p>
                
                <code class="block">
                    void applyBonus(float percentGood) {<br/>
                        <span class="indent1">IBonus bonus = getBonus(percentGood);</span><br/>
                        <br/>
                        <span class="indent1">displayBonus(bonus);</span><br/>
                    }
                </code>

                <p>The <code class="inline">applyBonus</code> function applies to the <code class="inline">percentGood</code> value (via <a href="#"><code class="inline">getBonus</code></a> which has a valid range of 0 - 1) Then, this example displays a bonus (if any) to the player via the <a href="#"><code class="inline">displayBonus</code></a> function.</p>
                
                <h2 id="WeatherSatus_options">WeatherSatus options</h2>
                <p>Your <code class="inline">applyBonus</code> function should be able to handle the following types returned from the <code class="inline">WeatherStatus</code> enum. We provided some suggestions on how to apply it to your bonus calculation:</p>
                <ul>
                    <li>Unset: <code class="inline">WeatherStatus</code> has no value (consider passing a value of 0)</li>
                    <li>Clear: apply percentGood as you see fit</li>
                    <li>Rainy: apply percentGood as you see fit</li>
                    <li>Cloudy: apply percentGood as you see fit</li>
                    <li>ErrorNotFound: <code class="inline">WeatherStatus</code> returned an error (consider passing a value of 0)</li>
                </ul>

                <h2 id="Error_messages_and_help">Error messages and help</h2>
                <p>While we have thoroughly tested this sample code, we cannot guarantee that it will work as expected. Environment settings and other modules may affect the outcome of this function. See our <a href="#">Error Messages</a> guide for error message and troubleshooting assistance.</p>
                <p>If our <a href="#">Error Messages</a> guide doesn't provide a solution for your issues, review our online developer communities:</p>
                <ul>
                    <li><a href="#">Niantic Dev Portal</a></li>
                    <li><a href="#">StackOverflow</a></li>
                    <li><a href="#">Reddit</a></li>
                </ul>
                <p>If you have a <a href="#">premier account</a>, please <a href="#">log</a> into our help center and <a href="#">file a request</a>. We’ll reply in 1-2 business days.</p>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>
</body>

</html>